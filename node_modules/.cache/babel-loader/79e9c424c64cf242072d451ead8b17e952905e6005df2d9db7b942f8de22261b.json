{"ast":null,"code":"import { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\nimport { handleSingularGraphQlError } from './utils.mjs';\nimport { selfAwareAsync } from '../../utils/selfAwareAsync.mjs';\nimport { extendCancellability } from '../cancellation.mjs';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails.mjs';\nfunction getFactory(client, modelIntrospection, model, operation, getInternals, useContext = false, customUserAgentDetails) {\n  const getWithContext = (contextSpec, arg, options) => {\n    return _get(client, modelIntrospection, model, arg, options, operation, getInternals, contextSpec, customUserAgentDetails);\n  };\n  const get = (arg, options) => {\n    return _get(client, modelIntrospection, model, arg, options, operation, getInternals, undefined, customUserAgentDetails);\n  };\n  return useContext ? getWithContext : get;\n}\nfunction _get(client, modelIntrospection, model, arg, options, operation, getInternals, context, customUserAgentDetails) {\n  return selfAwareAsync(async resultPromise => {\n    const {\n      name\n    } = model;\n    const query = generateGraphQLDocument(modelIntrospection, model, operation, options);\n    const variables = buildGraphQLVariables(model, operation, arg, modelIntrospection);\n    const auth = authModeParams(client, getInternals, options);\n    const headers = getCustomHeaders(client, getInternals, options?.headers);\n    const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n    try {\n      const basePromise = context ? client.graphql(context, {\n        ...auth,\n        query,\n        variables\n      }, headers) : client.graphql({\n        ...auth,\n        query,\n        variables,\n        ...userAgentOverride\n      }, headers);\n      const extendedPromise = extendCancellability(basePromise, resultPromise);\n      const {\n        data,\n        extensions\n      } = await extendedPromise;\n      // flatten response\n      if (data) {\n        const [key] = Object.keys(data);\n        const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n        if (flattenedResult === null) {\n          return {\n            data: null,\n            extensions\n          };\n        } else if (options?.selectionSet) {\n          return {\n            data: flattenedResult,\n            extensions\n          };\n        } else {\n          // TODO: refactor to avoid destructuring here\n          const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n          return {\n            data: initialized,\n            extensions\n          };\n        }\n      } else {\n        return {\n          data: null,\n          extensions\n        };\n      }\n    } catch (error) {\n      /**\n       * The `data` type returned by `error` here could be:\n       * 1) `null`\n       * 2) an empty object\n       * 3) \"populated\" but with a `null` value `{ getPost: null }`\n       * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n       */\n      const {\n        data,\n        errors\n      } = error;\n      /**\n       * `data` is not `null`, and is not an empty object:\n       */\n      if (data && Object.keys(data).length !== 0 && errors) {\n        const [key] = Object.keys(data);\n        const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n        /**\n         * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n         * if `flattenedResult`, result is an actual record:\n         */\n        if (flattenedResult) {\n          if (options?.selectionSet) {\n            return {\n              data: flattenedResult,\n              errors\n            };\n          } else {\n            // TODO: refactor to avoid destructuring here\n            const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n            return {\n              data: initialized,\n              errors\n            };\n          }\n        } else {\n          // was `data: { getPost: null }`)\n          return handleSingularGraphQlError(error);\n        }\n      } else {\n        // `data` is `null`:\n        return handleSingularGraphQlError(error);\n      }\n    }\n  });\n}\nexport { getFactory };","map":{"version":3,"names":["getFactory","client","modelIntrospection","model","operation","getInternals","useContext","customUserAgentDetails","getWithContext","contextSpec","arg","options","_get","get","undefined","context","selfAwareAsync","resultPromise","name","query","generateGraphQLDocument","variables","buildGraphQLVariables","auth","authModeParams","headers","getCustomHeaders","userAgentOverride","createUserAgentOverride","basePromise","graphql","extendedPromise","extendCancellability","data","extensions","key","Object","keys","flattenedResult","flattenItems","selectionSet","initialized","initializeModel","authMode","authToken","error","errors","length","handleSingularGraphQlError"],"sources":["/Users/yaki/digi-coin/digi-coin-app/node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/get.ts"],"sourcesContent":["import { authModeParams, buildGraphQLVariables, flattenItems, generateGraphQLDocument, getCustomHeaders, initializeModel, } from '../APIClient';\nimport { handleSingularGraphQlError } from './utils';\nimport { selfAwareAsync } from '../../utils';\nimport { extendCancellability } from '../cancellation';\nimport { createUserAgentOverride } from '../ai/getCustomUserAgentDetails';\nexport function getFactory(client, modelIntrospection, model, operation, getInternals, useContext = false, customUserAgentDetails) {\n    const getWithContext = (contextSpec, arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, contextSpec, customUserAgentDetails);\n    };\n    const get = (arg, options) => {\n        return _get(client, modelIntrospection, model, arg, options, operation, getInternals, undefined, customUserAgentDetails);\n    };\n    return useContext ? getWithContext : get;\n}\nfunction _get(client, modelIntrospection, model, arg, options, operation, getInternals, context, customUserAgentDetails) {\n    return selfAwareAsync(async (resultPromise) => {\n        const { name } = model;\n        const query = generateGraphQLDocument(modelIntrospection, model, operation, options);\n        const variables = buildGraphQLVariables(model, operation, arg, modelIntrospection);\n        const auth = authModeParams(client, getInternals, options);\n        const headers = getCustomHeaders(client, getInternals, options?.headers);\n        const userAgentOverride = createUserAgentOverride(customUserAgentDetails);\n        try {\n            const basePromise = context\n                ? client.graphql(context, {\n                    ...auth,\n                    query,\n                    variables,\n                }, headers)\n                : client.graphql({\n                    ...auth,\n                    query,\n                    variables,\n                    ...userAgentOverride,\n                }, headers);\n            const extendedPromise = extendCancellability(basePromise, resultPromise);\n            const { data, extensions } = await extendedPromise;\n            // flatten response\n            if (data) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                if (flattenedResult === null) {\n                    return { data: null, extensions };\n                }\n                else if (options?.selectionSet) {\n                    return { data: flattenedResult, extensions };\n                }\n                else {\n                    // TODO: refactor to avoid destructuring here\n                    const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                    return { data: initialized, extensions };\n                }\n            }\n            else {\n                return { data: null, extensions };\n            }\n        }\n        catch (error) {\n            /**\n             * The `data` type returned by `error` here could be:\n             * 1) `null`\n             * 2) an empty object\n             * 3) \"populated\" but with a `null` value `{ getPost: null }`\n             * 4) an actual record `{ getPost: { id: '1', title: 'Hello, World!' } }`\n             */\n            const { data, errors } = error;\n            /**\n             * `data` is not `null`, and is not an empty object:\n             */\n            if (data && Object.keys(data).length !== 0 && errors) {\n                const [key] = Object.keys(data);\n                const flattenedResult = flattenItems(modelIntrospection, name, data[key]);\n                /**\n                 * `flattenedResult` could be `null` here (e.g. `data: { getPost: null }`)\n                 * if `flattenedResult`, result is an actual record:\n                 */\n                if (flattenedResult) {\n                    if (options?.selectionSet) {\n                        return { data: flattenedResult, errors };\n                    }\n                    else {\n                        // TODO: refactor to avoid destructuring here\n                        const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken, !!context);\n                        return { data: initialized, errors };\n                    }\n                }\n                else {\n                    // was `data: { getPost: null }`)\n                    return handleSingularGraphQlError(error);\n                }\n            }\n            else {\n                // `data` is `null`:\n                return handleSingularGraphQlError(error);\n            }\n        }\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}