{"ast":null,"code":"import { toBase64 } from '@smithy/util-base64';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst serializeAiContext = aiContext => JSON.stringify(aiContext);\nconst serializeContent = content => content.map(block => {\n  if (block.image) {\n    return serializeImageBlock(block);\n  }\n  if (block.toolResult) {\n    return serializeToolResultBlock(block);\n  }\n  return block;\n});\nconst serializeToolConfiguration = ({\n  tools\n}) => ({\n  tools: Object.entries(tools).map(([name, tool]) => ({\n    toolSpec: {\n      name,\n      description: tool.description,\n      inputSchema: {\n        json: JSON.stringify(tool.inputSchema.json)\n      }\n    }\n  }))\n});\nconst serializeImageBlock = ({\n  image\n}) => ({\n  image: {\n    ...image,\n    source: {\n      ...image.source,\n      bytes: toBase64(image.source.bytes)\n    }\n  }\n});\nconst serializeJsonBlock = ({\n  json\n}) => ({\n  json: JSON.stringify(json)\n});\nconst serializeToolResultBlock = ({\n  toolResult\n}) => ({\n  toolResult: {\n    ...toolResult,\n    content: toolResult.content.map(toolResultBlock => {\n      if (toolResultBlock.image) {\n        return serializeImageBlock(toolResultBlock);\n      }\n      if (toolResultBlock.json) {\n        return serializeJsonBlock(toolResultBlock);\n      }\n      return toolResultBlock;\n    })\n  }\n});\nexport { serializeAiContext, serializeContent, serializeToolConfiguration };","map":{"version":3,"names":["serializeAiContext","aiContext","JSON","stringify","serializeContent","content","map","block","image","serializeImageBlock","toolResult","serializeToolResultBlock","serializeToolConfiguration","tools","Object","entries","name","tool","toolSpec","description","inputSchema","json","source","bytes","toBase64","serializeJsonBlock","toolResultBlock"],"sources":["/Users/yaki/digi-coin/digi-coin-app/node_modules/@aws-amplify/data-schema/src/runtime/internals/ai/conversationMessageSerializers.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { toBase64 } from '@smithy/util-base64';\nexport const serializeAiContext = (aiContext) => JSON.stringify(aiContext);\nexport const serializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return serializeImageBlock(block);\n    }\n    if (block.toolResult) {\n        return serializeToolResultBlock(block);\n    }\n    return block;\n});\nexport const serializeToolConfiguration = ({ tools }) => ({\n    tools: Object.entries(tools).map(([name, tool]) => ({\n        toolSpec: {\n            name,\n            description: tool.description,\n            inputSchema: {\n                json: JSON.stringify(tool.inputSchema.json),\n            },\n        },\n    })),\n});\nconst serializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: toBase64(image.source.bytes),\n        },\n    },\n});\nconst serializeJsonBlock = ({ json }) => ({\n    json: JSON.stringify(json),\n});\nconst serializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        ...toolResult,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return serializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return serializeJsonBlock(toolResultBlock);\n            }\n            return toolResultBlock;\n        }),\n    },\n});\n"],"mappings":";;AAAA;AACA;AAEY,MAACA,kBAAkB,GAAIC,SAAS,IAAKC,IAAI,CAACC,SAAS,CAACF,SAAS;AAC7D,MAACG,gBAAgB,GAAIC,OAAO,IAAKA,OAAO,CAACC,GAAG,CAAEC,KAAK,IAAK;EAChE,IAAIA,KAAK,CAACC,KAAK,EAAE;IACb,OAAOC,mBAAmB,CAACF,KAAK,CAAC;EACzC;EACI,IAAIA,KAAK,CAACG,UAAU,EAAE;IAClB,OAAOC,wBAAwB,CAACJ,KAAK,CAAC;EAC9C;EACI,OAAOA,KAAK;AAChB,CAAC;AACW,MAACK,0BAA0B,GAAGA,CAAC;EAAEC;AAAK,CAAE,MAAM;EACtDA,KAAK,EAAEC,MAAM,CAACC,OAAO,CAACF,KAAK,CAAC,CAACP,GAAG,CAAC,CAAC,CAACU,IAAI,EAAEC,IAAI,CAAC,MAAM;IAChDC,QAAQ,EAAE;MACNF,IAAI;MACJG,WAAW,EAAEF,IAAI,CAACE,WAAW;MAC7BC,WAAW,EAAE;QACTC,IAAI,EAAEnB,IAAI,CAACC,SAAS,CAACc,IAAI,CAACG,WAAW,CAACC,IAAI;MAC1D;IACA;EACA,CAAK,CAAC;AACN,CAAC;AACD,MAAMZ,mBAAmB,GAAGA,CAAC;EAAED;AAAK,CAAE,MAAM;EACxCA,KAAK,EAAE;IACH,GAAGA,KAAK;IACRc,MAAM,EAAE;MACJ,GAAGd,KAAK,CAACc,MAAM;MACfC,KAAK,EAAEC,QAAQ,CAAChB,KAAK,CAACc,MAAM,CAACC,KAAK;IAC9C;EACA;AACA,CAAC,CAAC;AACF,MAAME,kBAAkB,GAAGA,CAAC;EAAEJ;AAAI,CAAE,MAAM;EACtCA,IAAI,EAAEnB,IAAI,CAACC,SAAS,CAACkB,IAAI;AAC7B,CAAC,CAAC;AACF,MAAMV,wBAAwB,GAAGA,CAAC;EAAED;AAAU,CAAG,MAAM;EACnDA,UAAU,EAAE;IACR,GAAGA,UAAU;IACbL,OAAO,EAAEK,UAAU,CAACL,OAAO,CAACC,GAAG,CAAEoB,eAAe,IAAK;MACjD,IAAIA,eAAe,CAAClB,KAAK,EAAE;QACvB,OAAOC,mBAAmB,CAACiB,eAAe,CAAC;MAC3D;MACY,IAAIA,eAAe,CAACL,IAAI,EAAE;QACtB,OAAOI,kBAAkB,CAACC,eAAe,CAAC;MAC1D;MACY,OAAOA,eAAe;IAClC,CAAS;EACT;AACA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}