{"ast":null,"code":"import { ConsoleLogger } from '../Logger/ConsoleLogger.mjs';\nimport { InMemoryStorage } from './InMemoryStorage.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n * @returns Either a reference to window.localStorage or an in-memory storage as fallback\n */\nconst logger = new ConsoleLogger('CoreStorageUtils');\nconst getLocalStorageWithFallback = () => {\n  try {\n    // Attempt to use localStorage directly\n    if (typeof window !== 'undefined' && window.localStorage) {\n      return window.localStorage;\n    }\n  } catch (e) {\n    // Handle any errors related to localStorage access\n    logger.info('localStorage not found. InMemoryStorage is used as a fallback.');\n  }\n  // Return in-memory storage as a fallback if localStorage is not accessible\n  return new InMemoryStorage();\n};\n/**\n * @internal\n * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback\n */\nconst getSessionStorageWithFallback = () => {\n  try {\n    // Attempt to use sessionStorage directly\n    if (typeof window !== 'undefined' && window.sessionStorage) {\n      // Verify we can actually use it by testing access\n      window.sessionStorage.getItem('test');\n      return window.sessionStorage;\n    }\n    throw new Error('sessionStorage is not defined');\n  } catch (e) {\n    // Handle any errors related to sessionStorage access\n    logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');\n    return new InMemoryStorage();\n  }\n};\nexport { getLocalStorageWithFallback, getSessionStorageWithFallback };","map":{"version":3,"names":["logger","ConsoleLogger","getLocalStorageWithFallback","window","localStorage","e","info","InMemoryStorage","getSessionStorageWithFallback","sessionStorage","getItem","Error"],"sources":["/Users/yaki/digi-coin/digi-coin-app/node_modules/@aws-amplify/core/src/storage/utils.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger } from '../Logger';\nimport { InMemoryStorage } from './InMemoryStorage';\n/**\n * @internal\n * @returns Either a reference to window.localStorage or an in-memory storage as fallback\n */\nconst logger = new ConsoleLogger('CoreStorageUtils');\nexport const getLocalStorageWithFallback = () => {\n    try {\n        // Attempt to use localStorage directly\n        if (typeof window !== 'undefined' && window.localStorage) {\n            return window.localStorage;\n        }\n    }\n    catch (e) {\n        // Handle any errors related to localStorage access\n        logger.info('localStorage not found. InMemoryStorage is used as a fallback.');\n    }\n    // Return in-memory storage as a fallback if localStorage is not accessible\n    return new InMemoryStorage();\n};\n/**\n * @internal\n * @returns Either a reference to window.sessionStorage or an in-memory storage as fallback\n */\nexport const getSessionStorageWithFallback = () => {\n    try {\n        // Attempt to use sessionStorage directly\n        if (typeof window !== 'undefined' && window.sessionStorage) {\n            // Verify we can actually use it by testing access\n            window.sessionStorage.getItem('test');\n            return window.sessionStorage;\n        }\n        throw new Error('sessionStorage is not defined');\n    }\n    catch (e) {\n        // Handle any errors related to sessionStorage access\n        logger.info('sessionStorage not found. InMemoryStorage is used as a fallback.');\n        return new InMemoryStorage();\n    }\n};\n"],"mappings":";;;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA,MAAMA,MAAM,GAAG,IAAIC,aAAa,CAAC,kBAAkB,CAAC;AACxC,MAACC,2BAA2B,GAAGA,CAAA,KAAM;EAC7C,IAAI;IACR;IACQ,IAAI,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,YAAY,EAAE;MACtD,OAAOD,MAAM,CAACC,YAAY;IACtC;EACA,CAAK,CACD,OAAOC,CAAC,EAAE;IACd;IACQL,MAAM,CAACM,IAAI,CAAC,gEAAgE,CAAC;EACrF;EACA;EACI,OAAO,IAAIC,eAAe,EAAE;AAChC;AACA;AACA;AACA;AACA;AACY,MAACC,6BAA6B,GAAGA,CAAA,KAAM;EAC/C,IAAI;IACR;IACQ,IAAI,OAAOL,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACM,cAAc,EAAE;MACpE;MACYN,MAAM,CAACM,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;MACrC,OAAOP,MAAM,CAACM,cAAc;IACxC;IACQ,MAAM,IAAIE,KAAK,CAAC,+BAA+B,CAAC;EACxD,CAAK,CACD,OAAON,CAAC,EAAE;IACd;IACQL,MAAM,CAACM,IAAI,CAAC,kEAAkE,CAAC;IAC/E,OAAO,IAAIC,eAAe,EAAE;EACpC;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}