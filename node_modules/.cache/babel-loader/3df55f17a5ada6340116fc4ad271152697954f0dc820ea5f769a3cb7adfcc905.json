{"ast":null,"code":"var _jsxFileName = \"/Users/yaki/digi-coin/digi-coin-app/src/components/SendCoin.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SendCoin() {\n  _s();\n  const [recipient, setRecipient] = useState('');\n  const [amount, setAmount] = useState('');\n  const [balance, setBalance] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [users, setUsers] = useState([]);\n  useEffect(() => {\n    fetchBalance();\n    fetchUsers();\n  }, []);\n  async function fetchBalance() {\n    try {\n      const response = await fetch('/api/balance', {\n        headers: {\n          'X-Auth-Username': localStorage.getItem('username')\n        }\n      });\n      if (!response.ok) {\n        throw new Error('残高の取得に失敗しました');\n      }\n      const data = await response.json();\n      setBalance(data.balance);\n    } catch (err) {\n      console.error('残高取得エラー:', err);\n      setError('残高の取得に失敗しました。');\n    }\n  }\n  async function fetchUsers() {\n    try {\n      const response = await fetch('/api/users', {\n        headers: {\n          'X-Auth-Username': localStorage.getItem('username')\n        }\n      });\n      if (!response.ok) {\n        throw new Error('ユーザーリストの取得に失敗しました');\n      }\n      const data = await response.json();\n      setUsers(data.users);\n    } catch (err) {\n      console.error('ユーザーリスト取得エラー:', err);\n      setError('ユーザーリストの取得に失敗しました。');\n    }\n  }\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (!recipient || !amount) {\n      setError('受取人と枚数を入力してください。');\n      return;\n    }\n    try {\n      const response = await fetch('/api/send', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Auth-Username': localStorage.getItem('username')\n        },\n        body: JSON.stringify({\n          recipient,\n          amount\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || '送付に失敗しました');\n      }\n      const data = await response.json();\n      setSuccess('送付が完了しました！');\n      setBalance(data.newBalance);\n      setRecipient('');\n      setAmount('');\n    } catch (err) {\n      console.error('送付エラー:', err);\n      setError(err.message || '送付に失敗しました。残高が十分かご確認ください。');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"DigiCoin\\u9001\\u4ED8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u6B8B\\u9AD8: \", balance, \" DGC\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"recipient\",\n          children: \"\\u53D7\\u53D6\\u4EBA:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"recipient\",\n          value: recipient,\n          onChange: e => setRecipient(e.target.value),\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), users.map(user => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: user.username,\n            children: user.username\n          }, user.username, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"amount\",\n          children: \"\\u679A\\u6570:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"amount\",\n          value: amount,\n          onChange: e => setAmount(e.target.value),\n          required: true,\n          min: \"1\",\n          step: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"\\u9001\\u4ED8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(SendCoin, \"qTNyQDs8RxmYUrK4m+b15T8hX3M=\");\n_c = SendCoin;\nvar _c;\n$RefreshReg$(_c, \"SendCoin\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","SendCoin","_s","recipient","setRecipient","amount","setAmount","balance","setBalance","error","setError","success","setSuccess","users","setUsers","fetchBalance","fetchUsers","response","fetch","headers","localStorage","getItem","ok","Error","data","json","err","console","handleSubmit","e","preventDefault","method","body","JSON","stringify","errorData","message","newBalance","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","id","value","onChange","target","required","map","user","username","type","min","step","_c","$RefreshReg$"],"sources":["/Users/yaki/digi-coin/digi-coin-app/src/components/SendCoin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nexport default function SendCoin() {\n  const [recipient, setRecipient] = useState('');\n  const [amount, setAmount] = useState('');\n  const [balance, setBalance] = useState(0);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [users, setUsers] = useState([]);\n\n  useEffect(() => {\n    fetchBalance();\n    fetchUsers();\n  }, []);\n\n  async function fetchBalance() {\n    try {\n      const response = await fetch('/api/balance', {\n        headers: {\n          'X-Auth-Username': localStorage.getItem('username')\n        }\n      });\n      if (!response.ok) {\n        throw new Error('残高の取得に失敗しました');\n      }\n      const data = await response.json();\n      setBalance(data.balance);\n    } catch (err) {\n      console.error('残高取得エラー:', err);\n      setError('残高の取得に失敗しました。');\n    }\n  }\n\n  async function fetchUsers() {\n    try {\n      const response = await fetch('/api/users', {\n        headers: {\n          'X-Auth-Username': localStorage.getItem('username')\n        }\n      });\n      if (!response.ok) {\n        throw new Error('ユーザーリストの取得に失敗しました');\n      }\n      const data = await response.json();\n      setUsers(data.users);\n    } catch (err) {\n      console.error('ユーザーリスト取得エラー:', err);\n      setError('ユーザーリストの取得に失敗しました。');\n    }\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n\n    if (!recipient || !amount) {\n      setError('受取人と枚数を入力してください。');\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/send', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Auth-Username': localStorage.getItem('username')\n        },\n        body: JSON.stringify({ recipient, amount })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || '送付に失敗しました');\n      }\n\n      const data = await response.json();\n      setSuccess('送付が完了しました！');\n      setBalance(data.newBalance);\n      setRecipient('');\n      setAmount('');\n    } catch (err) {\n      console.error('送付エラー:', err);\n      setError(err.message || '送付に失敗しました。残高が十分かご確認ください。');\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <h2>DigiCoin送付</h2>\n      <p>残高: {balance} DGC</p>\n      {error && <p className=\"error\">{error}</p>}\n      {success && <p className=\"success\">{success}</p>}\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label htmlFor=\"recipient\">受取人:</label>\n          <select\n            id=\"recipient\"\n            value={recipient}\n            onChange={(e) => setRecipient(e.target.value)}\n            required\n          >\n            <option value=\"\">選択してください</option>\n            {users.map(user => (\n              <option key={user.username} value={user.username}>{user.username}</option>\n            ))}\n          </select>\n        </div>\n        <div>\n          <label htmlFor=\"amount\">枚数:</label>\n          <input\n            type=\"number\"\n            id=\"amount\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n            required\n            min=\"1\"\n            step=\"1\"\n          />\n        </div>\n        <button type=\"submit\">送付</button>\n      </form>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}