{"ast":null,"code":"import { map } from 'rxjs';\nimport { generateGraphQLDocument, buildGraphQLVariables, authModeParams, getCustomHeaders, flattenItems, initializeModel } from '../APIClient.mjs';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction subscriptionFactory(client, modelIntrospection, model, operation, getInternals) {\n  const {\n    name\n  } = model;\n  const subscription = args => {\n    const query = generateGraphQLDocument(modelIntrospection, model, operation, args);\n    const variables = buildGraphQLVariables(model, operation, args, modelIntrospection);\n    const auth = authModeParams(client, getInternals, args);\n    const headers = getCustomHeaders(client, getInternals, args?.headers);\n    const observable = client.graphql({\n      ...auth,\n      query,\n      variables\n    }, headers);\n    return observable.pipe(map(value => {\n      const [key] = Object.keys(value.data);\n      const data = value.data[key];\n      const flattenedResult = flattenItems(modelIntrospection, name, data);\n      if (flattenedResult === null) {\n        return null;\n      } else if (args?.selectionSet) {\n        return flattenedResult;\n      } else {\n        const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken);\n        return initialized;\n      }\n    }));\n  };\n  return subscription;\n}\nexport { subscriptionFactory };","map":{"version":3,"names":["subscriptionFactory","client","modelIntrospection","model","operation","getInternals","name","subscription","args","query","generateGraphQLDocument","variables","buildGraphQLVariables","auth","authModeParams","headers","getCustomHeaders","observable","graphql","pipe","map","value","key","Object","keys","data","flattenedResult","flattenItems","selectionSet","initialized","initializeModel","authMode","authToken"],"sources":["/Users/yaki/digi-coin/digi-coin-app/node_modules/@aws-amplify/data-schema/src/runtime/internals/operations/subscription.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { map } from 'rxjs';\nimport { authModeParams, buildGraphQLVariables, generateGraphQLDocument, getCustomHeaders, initializeModel, flattenItems, } from '../APIClient';\nexport function subscriptionFactory(client, modelIntrospection, model, operation, getInternals) {\n    const { name } = model;\n    const subscription = (args) => {\n        const query = generateGraphQLDocument(modelIntrospection, model, operation, args);\n        const variables = buildGraphQLVariables(model, operation, args, modelIntrospection);\n        const auth = authModeParams(client, getInternals, args);\n        const headers = getCustomHeaders(client, getInternals, args?.headers);\n        const observable = client.graphql({\n            ...auth,\n            query,\n            variables,\n        }, headers);\n        return observable.pipe(map((value) => {\n            const [key] = Object.keys(value.data);\n            const data = value.data[key];\n            const flattenedResult = flattenItems(modelIntrospection, name, data);\n            if (flattenedResult === null) {\n                return null;\n            }\n            else if (args?.selectionSet) {\n                return flattenedResult;\n            }\n            else {\n                const [initialized] = initializeModel(client, name, [flattenedResult], modelIntrospection, auth.authMode, auth.authToken);\n                return initialized;\n            }\n        }));\n    };\n    return subscription;\n}\n"],"mappings":";;;AAAA;AACA;AAGO,SAASA,mBAAmBA,CAACC,MAAM,EAAEC,kBAAkB,EAAEC,KAAK,EAAEC,SAAS,EAAEC,YAAY,EAAE;EAC5F,MAAM;IAAEC;EAAI,CAAE,GAAGH,KAAK;EACtB,MAAMI,YAAY,GAAIC,IAAI,IAAK;IAC3B,MAAMC,KAAK,GAAGC,uBAAuB,CAACR,kBAAkB,EAAEC,KAAK,EAAEC,SAAS,EAAEI,IAAI,CAAC;IACjF,MAAMG,SAAS,GAAGC,qBAAqB,CAACT,KAAK,EAAEC,SAAS,EAAEI,IAAI,EAAEN,kBAAkB,CAAC;IACnF,MAAMW,IAAI,GAAGC,cAAc,CAACb,MAAM,EAAEI,YAAY,EAAEG,IAAI,CAAC;IACvD,MAAMO,OAAO,GAAGC,gBAAgB,CAACf,MAAM,EAAEI,YAAY,EAAEG,IAAI,EAAEO,OAAO,CAAC;IACrE,MAAME,UAAU,GAAGhB,MAAM,CAACiB,OAAO,CAAC;MAC9B,GAAGL,IAAI;MACPJ,KAAK;MACLE;IACZ,CAAS,EAAEI,OAAO,CAAC;IACX,OAAOE,UAAU,CAACE,IAAI,CAACC,GAAG,CAAEC,KAAK,IAAK;MAClC,MAAM,CAACC,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,CAACH,KAAK,CAACI,IAAI,CAAC;MACrC,MAAMA,IAAI,GAAGJ,KAAK,CAACI,IAAI,CAACH,GAAG,CAAC;MAC5B,MAAMI,eAAe,GAAGC,YAAY,CAACzB,kBAAkB,EAAEI,IAAI,EAAEmB,IAAI,CAAC;MACpE,IAAIC,eAAe,KAAK,IAAI,EAAE;QAC1B,OAAO,IAAI;MAC3B,CAAa,MACI,IAAIlB,IAAI,EAAEoB,YAAY,EAAE;QACzB,OAAOF,eAAe;MACtC,CAAa,MACI;QACD,MAAM,CAACG,WAAW,CAAC,GAAGC,eAAe,CAAC7B,MAAM,EAAEK,IAAI,EAAE,CAACoB,eAAe,CAAC,EAAExB,kBAAkB,EAAEW,IAAI,CAACkB,QAAQ,EAAElB,IAAI,CAACmB,SAAS,CAAC;QACzH,OAAOH,WAAW;MAClC;IACA,CAAS,CAAC,CAAC;EACX,CAAK;EACD,OAAOtB,YAAY;AACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}